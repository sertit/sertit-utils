<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"/>
<meta name="generator" content="pdoc 0.9.2"/>
<title>sertit.misc API documentation</title>
<meta name="description" content="Miscellaneous Tools"/>
<link rel="preload stylesheet" as="style"
href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css"
integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style"
href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css"
integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style"
href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/darcula.min.css"
crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}#lunr-search{width:100%;font-size:1em;padding:6px 9px 5px 9px;border:1px solid silver}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100%;padding:3em 4em;border-left:1px solid #ddd;overflow-x:hidden}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}table{display:block;overflow-x:auto;word-break:keep-all;border-collapse:separate;border-spacing:0}th{background-color:#c4d5e780;padding:5px;border-bottom:0.1px solid gray;border-right:0.1px solid gray;border-top:0.1px solid gray}td,th{margin:0}td{white-space:nowrap;border-bottom:0.1px solid gray;border-right:0.1px solid gray}td:empty{background-color:#ececec}th:nth-child(1){border-left:0.1px solid gray}td:nth-child(1){border-left:0.1px solid gray;border-right:0.1px solid gray}th:nth-child(1),td:nth-child(1){background-color:#c4d5e7;position:-webkit-sticky;position:sticky;left:0}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML"
integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"
integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>sertit.misc</code></h1>
</header>
<section id="section-intro">
<p>Miscellaneous Tools</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># -*- coding: utf-8 -*-
# Copyright 2021, SERTIT-ICube - France, https://sertit.unistra.fr/
# This file is part of sertit-utils project
#     https://github.com/sertit/sertit-utils
#
# Licensed under the Apache License, Version 2.0 (the &#34;License&#34;);
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an &#34;AS IS&#34; BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
&#34;&#34;&#34; Miscellaneous Tools &#34;&#34;&#34;

import logging
import os
import pprint
import subprocess
import sys
from contextlib import contextmanager
from enum import Enum, unique
from pathlib import Path
from typing import Any, Union

from cloudpathlib import AnyPath, CloudPath

from sertit.logs import SU_NAME

LOGGER = logging.getLogger(SU_NAME)


@unique
class ListEnum(Enum):
    &#34;&#34;&#34;
    List Enum (enum with function listing names and values)

    ```python
    &gt;&gt;&gt; @unique
    &gt;&gt;&gt; class TsxPolarization(ListEnum):
    &gt;&gt;&gt;     SINGLE = &#34;S&#34;  # Single
    &gt;&gt;&gt;     DUAL = &#34;D&#34;  # Dual
    &gt;&gt;&gt;     QUAD = &#34;Q&#34;  # Quad
    &gt;&gt;&gt;     TWIN = &#34;T&#34;  # Twin
    ```
    &#34;&#34;&#34;

    @classmethod
    def list_values(cls) -&gt; list:
        &#34;&#34;&#34;
        Get the value list of this enum

        ```python
        &gt;&gt;&gt; TsxPolarization.list_values()
        [&#34;S&#34;, &#34;D&#34;, &#34;Q&#34;, &#34;T&#34;]
        ```

        &#34;&#34;&#34;
        return list(map(lambda c: c.value, cls))

    @classmethod
    def list_names(cls) -&gt; list:
        &#34;&#34;&#34;
        Get the name list of this enum:

        ```python
        &gt;&gt;&gt; TsxPolarization.list_values()
        [&#34;SINGLE&#34;, &#34;DUAL&#34;, &#34;QUAD&#34;, &#34;TWIN&#34;]
        ```
        &#34;&#34;&#34;
        return list(map(lambda c: c.name, cls))

    @classmethod
    def from_value(cls, val: Any) -&gt; &#34;ListEnum&#34;:
        &#34;&#34;&#34;
        Get the enum class from its value:

        ```python
        &gt;&gt;&gt; TsxPolarization.from_value(&#34;Q&#34;)
        &lt;TsxPolarization.QUAD: &#39;Q&#39;&gt;
        ```

        Args:
            val (Any): Value of the Enum

        Returns:
            ListEnum: Enum with value
        &#34;&#34;&#34;
        if isinstance(val, cls):
            val = val.value
        try:
            return next(enum for enum in cls if enum.value == val)
        except StopIteration as ex:
            raise ValueError(f&#34;Non existing {val} in {cls.list_values()}&#34;) from ex

    @classmethod
    def convert_from(cls, to_convert: Union[list, str]) -&gt; list:
        &#34;&#34;&#34;
        Convert from a list or a string to an enum instance

        ```python
        &gt;&gt;&gt; TsxPolarization.convert_from([&#34;SINGLE&#34;, &#34;S&#34;, TsxPolarization.QUAD])
        [&lt;TsxPolarization.SINGLE: &#39;S&#39;&gt;, &lt;TsxPolarization.SINGLE: &#39;S&#39;&gt;, &lt;TsxPolarization.QUAD: &#39;Q&#39;&gt;]
        ```

        Args:
            to_convert (Union[list, str]): List or string to convert into an enum instance

        Returns:
            list: Converted list

        &#34;&#34;&#34;
        if not isinstance(to_convert, list):
            to_convert = [to_convert]

        enums = []

        for tc in to_convert:
            if tc in cls.list_values():
                enums.append(cls.from_value(tc))
            elif tc in cls.list_names():
                enums.append(getattr(cls, tc))
            elif isinstance(tc, cls):
                enums.append(tc)
            else:
                raise TypeError(
                    f&#34;Invalid name {tc}, &#34;
                    f&#34;should be chosen among {cls.list_values()} or {cls.list_names()}&#34;
                )

        return enums


def remove_empty_values(list_with_empty_values: list) -&gt; list:
    &#34;&#34;&#34;
    Remove empty values from list:

    ```python
    &gt;&gt;&gt; lst = [&#34;A&#34;, &#34;T&#34;, &#34;R&#34;, &#34;&#34;, 3, None]
    &gt;&gt;&gt; list_to_dict(lst)
    [&#34;A&#34;, &#34;T&#34;, &#34;R&#34;, 3]
    ```

    Args:
        list_with_empty_values (list): List with empty values
    Returns:
        list: Curated list
    &#34;&#34;&#34;

    return list(filter(None, list_with_empty_values))


def list_to_dict(dict_list: list) -&gt; dict:
    &#34;&#34;&#34;
    Return a dictionary from a list `[key, value, key_2, value_2...]`

    ```python
    &gt;&gt;&gt; lst = [&#34;A&#34;,&#34;T&#34;, &#34;R&#34;, 3]
    &gt;&gt;&gt; list_to_dict(lst)
    {&#34;A&#34;: &#34;T&#34;, &#34;R&#34;: 3}
    ```

    Args:
        dict_list (list[str]): Dictionary as a list

    Returns:
        dict: Dictionary
    &#34;&#34;&#34;
    dictionary = {dict_list[i]: dict_list[i + 1] for i in range(0, len(dict_list), 2)}
    return dictionary


def nested_set(dic: dict, keys: list, value: Any) -&gt; None:
    &#34;&#34;&#34;
    Set value in nested directory:

    ```python
    &gt;&gt;&gt; dct = {&#34;A&#34;: &#34;T&#34;, &#34;R&#34;: 3}
    &gt;&gt;&gt; nested_set(dct, keys=[&#34;B&#34;, &#34;C&#34;, &#34;D&#34;], value=&#34;value&#34;)
    {
    &#34;A&#34;: &#34;T&#34;,
    &#34;R&#34;: 3,
    &#34;B&#34;: {
         &#34;C&#34;: {
              &#34;D&#34;: &#34;value&#34;
              }
         }
    }
    ```

    Args:
        dic (dict): Dictionary
        keys (list[str]): Keys as a list
        value: Value to be set
    &#34;&#34;&#34;
    for key in keys[:-1]:
        dic = dic.setdefault(key, {})
    dic[keys[-1]] = value


def check_mandatory_keys(data_dict: dict, mandatory_keys: list) -&gt; None:
    &#34;&#34;&#34;
    Check all mandatory argument in a dictionary.
    Raise an exception if a mandatory argument is missing.

    **Note**: nested keys do not work here !

    ```python
    &gt;&gt;&gt; dct = {&#34;A&#34;: &#34;T&#34;, &#34;R&#34;: 3}
    &gt;&gt;&gt; check_mandatory_keys(dct, [&#34;A&#34;, &#34;R&#34;])  # Returns nothing, is OK
    &gt;&gt;&gt; check_mandatory_keys(dct, [&#34;C&#34;])
    Traceback (most recent call last):
      File &#34;&lt;input&gt;&#34;, line 1, in &lt;module&gt;
      File &#34;&lt;input&gt;&#34;, line 167, in check_mandatory_keys
    ValueError: Missing mandatory key &#39;C&#39; among {&#39;A&#39;: &#39;T&#39;, &#39;R&#39;: 3}
    ```

    Args:
        data_dict (dict): Data dictionary to be checked
        mandatory_keys (list[str]): List of mandatory keys
    &#34;&#34;&#34;

    for mandatory_key in mandatory_keys:
        if mandatory_key not in data_dict:
            raise ValueError(
                f&#34;Missing mandatory key &#39;{mandatory_key}&#39; among {pprint.pformat(data_dict)}&#34;
            )


def find_by_key(data: dict, target: str) -&gt; Any:
    &#34;&#34;&#34;
    Find a value by key in a dictionary.

    ```python
    &gt;&gt;&gt; dct = {
    &gt;&gt;&gt;         &#34;A&#34;: &#34;T&#34;,
    &gt;&gt;&gt;         &#34;R&#34;: 3,
    &gt;&gt;&gt;         &#34;B&#34;: {
    &gt;&gt;&gt;             &#34;C&#34;: {
    &gt;&gt;&gt;                 &#34;D&#34;: &#34;value&#34;
    &gt;&gt;&gt;                  }
    &gt;&gt;&gt;              }
    &gt;&gt;&gt;        }
    &gt;&gt;&gt; find_by_key(dct, &#34;D&#34;)
    &#34;value&#34;
    ```

    Args:
        data (dict): Dict to walk through
        target (str): target key

    Returns:
        Any: Value data[...][target]

    &#34;&#34;&#34;
    val = None
    for key, value in data.items():
        if isinstance(value, dict):
            val = find_by_key(value, target)
            if val:
                break
        elif key == target:
            val = value
    return val


def run_cli(
    cmd: Union[str, list],
    timeout: float = None,
    check_return_value: bool = True,
    in_background: bool = True,
    cwd=&#34;/&#34;,
) -&gt; (int, str):
    &#34;&#34;&#34;
    Run a command line.

    ```python
    &gt;&gt;&gt; cmd_hillshade = [&#34;gdaldem&#34;, &#34;--config&#34;,
    &gt;&gt;&gt;                  &#34;NUM_THREADS&#34;, &#34;1&#34;,
    &gt;&gt;&gt;                  &#34;hillshade&#34;, strings.to_cmd_string(dem_path),
    &gt;&gt;&gt;                  &#34;-compute_edges&#34;,
    &gt;&gt;&gt;                  &#34;-z&#34;, self.nof_threads,
    &gt;&gt;&gt;                  &#34;-az&#34;, azimuth,
    &gt;&gt;&gt;                  &#34;-alt&#34;, zenith,
    &gt;&gt;&gt;                  &#34;-of&#34;, &#34;GTiff&#34;,
    &gt;&gt;&gt;                  strings.to_cmd_string(hillshade_dem)]
    &gt;&gt;&gt; # Run command
    &gt;&gt;&gt; run_cli(cmd_hillshade)
    ```

    Args:
        cmd (str or list[str]): Command as a list
        timeout (float): Timeout
        check_return_value (bool): Check output value of the exe
        in_background (bool): Run the subprocess in background
        cwd (str): Working directory

    Returns:
        int, str: return value and output log
    &#34;&#34;&#34;
    if isinstance(cmd, list):
        cmd = [str(cmd_i) for cmd_i in cmd]
        cmd_line = &#34; &#34;.join(cmd)
    elif isinstance(cmd, str):
        cmd_line = cmd
    else:
        raise TypeError(&#34;The command line should be given as a str or a list&#34;)

    # Background
    LOGGER.debug(cmd_line)
    if in_background:
        stdout = None
        stderr = None
        close_fds = True
    else:
        stdout = subprocess.PIPE
        stderr = subprocess.STDOUT
        close_fds = False

    # The os.setsid() is passed in the argument preexec_fn so
    # it&#39;s run after the fork() and before  exec() to run the shell.
    with subprocess.Popen(
        cmd_line,
        shell=True,
        stdout=stdout,
        stderr=stderr,
        cwd=cwd,
        start_new_session=True,
        close_fds=close_fds,
    ) as process:
        output = &#34;&#34;
        if not in_background:
            for line in process.stdout:
                line = line.decode(
                    encoding=sys.stdout.encoding,
                    errors=&#34;replace&#34;
                    if sys.version_info &lt; (3, 5)
                    else &#34;backslashreplace&#34;,
                ).rstrip()
                LOGGER.info(line)
                output += line

        # Get return value
        retval = process.wait(timeout)

        # Kill process
        process.kill()

    # Check return value
    if check_return_value and retval != 0:
        raise RuntimeError(f&#34;Exe {cmd[0]} has failed.&#34;)

    return retval, output


def get_function_name() -&gt; str:
    &#34;&#34;&#34;
    Get the name of the function where this one is launched.

    ```python
    &gt;&gt;&gt; def huhuhu():
    &gt;&gt;&gt;     return get_function_name()
    &gt;&gt;&gt; huhuhu()
    &#34;huhuhu&#34;
    ```

    Returns:
        str: Function&#39;s name
    &#34;&#34;&#34;
    # pylint: disable=W0212
    return sys._getframe(1).f_code.co_name


def in_docker() -&gt; bool:
    &#34;&#34;&#34;
    Check if the session is running inside a docker

    ```python
    if in_docker():
        print(&#34;OMG we are stock in a Docker ! Get me out of here !&#34;)
    else:
        print(&#34;We are safe&#34;)
    ```

    Returns:
        bool: True if inside a docker
    &#34;&#34;&#34;
    try:
        with open(&#34;/proc/1/cgroup&#34;, &#34;rt&#34;) as ifh:
            in_dck = &#34;docker&#34; in ifh.read()
    # pylint: disable=W0703
    except Exception:
        in_dck = False

    return in_dck


@contextmanager
def chdir(newdir: Union[str, CloudPath, Path]) -&gt; None:
    &#34;&#34;&#34;
    Change current directory, used as a context manager, ie:

    ```python
    &gt;&gt;&gt; folder = r&#34;C:\&#34;
    &gt;&gt;&gt; with chdir(folder):
    &gt;&gt;&gt;     print(os.getcwd())
    &#39;C:\\&#39;
    ```

    Args:
        newdir (str): New directory
    &#34;&#34;&#34;
    newdir = AnyPath(newdir)
    prevdir = os.getcwd()
    os.chdir(os.path.expanduser(newdir))
    try:
        yield
    finally:
        os.chdir(prevdir)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="sertit.misc.remove_empty_values"><code class="name flex">
<p>def <span class="ident">remove_empty_values</span>(</p><p>list_with_empty_values)</p>
</code></dt>
<dd>
<div class="desc"><p>Remove empty values from list:</p>
<pre><code class="language-python">&gt;&gt;&gt; lst = [&quot;A&quot;, &quot;T&quot;, &quot;R&quot;, &quot;&quot;, 3, None]
&gt;&gt;&gt; list_to_dict(lst)
[&quot;A&quot;, &quot;T&quot;, &quot;R&quot;, 3]
</code></pre>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>list_with_empty_values</code></strong> :&ensp;<code>list</code></dt>
<dd>List with empty values</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>list</code></dt>
<dd>Curated list</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def remove_empty_values(list_with_empty_values: list) -&gt; list:
    &#34;&#34;&#34;
    Remove empty values from list:

    ```python
    &gt;&gt;&gt; lst = [&#34;A&#34;, &#34;T&#34;, &#34;R&#34;, &#34;&#34;, 3, None]
    &gt;&gt;&gt; list_to_dict(lst)
    [&#34;A&#34;, &#34;T&#34;, &#34;R&#34;, 3]
    ```

    Args:
        list_with_empty_values (list): List with empty values
    Returns:
        list: Curated list
    &#34;&#34;&#34;

    return list(filter(None, list_with_empty_values))</code></pre>
</details>
</dd>
<dt id="sertit.misc.list_to_dict"><code class="name flex">
<p>def <span class="ident">list_to_dict</span>(</p><p>dict_list)</p>
</code></dt>
<dd>
<div class="desc"><p>Return a dictionary from a list <code>[key, value, key_2, value_2&hellip;]</code></p>
<pre><code class="language-python">&gt;&gt;&gt; lst = [&quot;A&quot;,&quot;T&quot;, &quot;R&quot;, 3]
&gt;&gt;&gt; list_to_dict(lst)
{&quot;A&quot;: &quot;T&quot;, &quot;R&quot;: 3}
</code></pre>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>dict_list</code></strong> :&ensp;<code>list[str]</code></dt>
<dd>Dictionary as a list</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Dictionary</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def list_to_dict(dict_list: list) -&gt; dict:
    &#34;&#34;&#34;
    Return a dictionary from a list `[key, value, key_2, value_2...]`

    ```python
    &gt;&gt;&gt; lst = [&#34;A&#34;,&#34;T&#34;, &#34;R&#34;, 3]
    &gt;&gt;&gt; list_to_dict(lst)
    {&#34;A&#34;: &#34;T&#34;, &#34;R&#34;: 3}
    ```

    Args:
        dict_list (list[str]): Dictionary as a list

    Returns:
        dict: Dictionary
    &#34;&#34;&#34;
    dictionary = {dict_list[i]: dict_list[i + 1] for i in range(0, len(dict_list), 2)}
    return dictionary</code></pre>
</details>
</dd>
<dt id="sertit.misc.nested_set"><code class="name flex">
<p>def <span class="ident">nested_set</span>(</p><p>dic, <br>keys, <br>value)</p>
</code></dt>
<dd>
<div class="desc"><p>Set value in nested directory:</p>
<pre><code class="language-python">&gt;&gt;&gt; dct = {&quot;A&quot;: &quot;T&quot;, &quot;R&quot;: 3}
&gt;&gt;&gt; nested_set(dct, keys=[&quot;B&quot;, &quot;C&quot;, &quot;D&quot;], value=&quot;value&quot;)
{
&quot;A&quot;: &quot;T&quot;,
&quot;R&quot;: 3,
&quot;B&quot;: {
     &quot;C&quot;: {
          &quot;D&quot;: &quot;value&quot;
          }
     }
}
</code></pre>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>dic</code></strong> :&ensp;<code>dict</code></dt>
<dd>Dictionary</dd>
<dt><strong><code>keys</code></strong> :&ensp;<code>list[str]</code></dt>
<dd>Keys as a list</dd>
<dt><strong><code>value</code></strong></dt>
<dd>Value to be set</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def nested_set(dic: dict, keys: list, value: Any) -&gt; None:
    &#34;&#34;&#34;
    Set value in nested directory:

    ```python
    &gt;&gt;&gt; dct = {&#34;A&#34;: &#34;T&#34;, &#34;R&#34;: 3}
    &gt;&gt;&gt; nested_set(dct, keys=[&#34;B&#34;, &#34;C&#34;, &#34;D&#34;], value=&#34;value&#34;)
    {
    &#34;A&#34;: &#34;T&#34;,
    &#34;R&#34;: 3,
    &#34;B&#34;: {
         &#34;C&#34;: {
              &#34;D&#34;: &#34;value&#34;
              }
         }
    }
    ```

    Args:
        dic (dict): Dictionary
        keys (list[str]): Keys as a list
        value: Value to be set
    &#34;&#34;&#34;
    for key in keys[:-1]:
        dic = dic.setdefault(key, {})
    dic[keys[-1]] = value</code></pre>
</details>
</dd>
<dt id="sertit.misc.check_mandatory_keys"><code class="name flex">
<p>def <span class="ident">check_mandatory_keys</span>(</p><p>data_dict, <br>mandatory_keys)</p>
</code></dt>
<dd>
<div class="desc"><p>Check all mandatory argument in a dictionary.
Raise an exception if a mandatory argument is missing.</p>
<p><strong>Note</strong>: nested keys do not work here !</p>
<pre><code class="language-python">&gt;&gt;&gt; dct = {&quot;A&quot;: &quot;T&quot;, &quot;R&quot;: 3}
&gt;&gt;&gt; check_mandatory_keys(dct, [&quot;A&quot;, &quot;R&quot;])  # Returns nothing, is OK
&gt;&gt;&gt; check_mandatory_keys(dct, [&quot;C&quot;])
Traceback (most recent call last):
  File &quot;&lt;input&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;&lt;input&gt;&quot;, line 167, in check_mandatory_keys
ValueError: Missing mandatory key 'C' among {'A': 'T', 'R': 3}
</code></pre>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>data_dict</code></strong> :&ensp;<code>dict</code></dt>
<dd>Data dictionary to be checked</dd>
<dt><strong><code>mandatory_keys</code></strong> :&ensp;<code>list[str]</code></dt>
<dd>List of mandatory keys</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def check_mandatory_keys(data_dict: dict, mandatory_keys: list) -&gt; None:
    &#34;&#34;&#34;
    Check all mandatory argument in a dictionary.
    Raise an exception if a mandatory argument is missing.

    **Note**: nested keys do not work here !

    ```python
    &gt;&gt;&gt; dct = {&#34;A&#34;: &#34;T&#34;, &#34;R&#34;: 3}
    &gt;&gt;&gt; check_mandatory_keys(dct, [&#34;A&#34;, &#34;R&#34;])  # Returns nothing, is OK
    &gt;&gt;&gt; check_mandatory_keys(dct, [&#34;C&#34;])
    Traceback (most recent call last):
      File &#34;&lt;input&gt;&#34;, line 1, in &lt;module&gt;
      File &#34;&lt;input&gt;&#34;, line 167, in check_mandatory_keys
    ValueError: Missing mandatory key &#39;C&#39; among {&#39;A&#39;: &#39;T&#39;, &#39;R&#39;: 3}
    ```

    Args:
        data_dict (dict): Data dictionary to be checked
        mandatory_keys (list[str]): List of mandatory keys
    &#34;&#34;&#34;

    for mandatory_key in mandatory_keys:
        if mandatory_key not in data_dict:
            raise ValueError(
                f&#34;Missing mandatory key &#39;{mandatory_key}&#39; among {pprint.pformat(data_dict)}&#34;
            )</code></pre>
</details>
</dd>
<dt id="sertit.misc.find_by_key"><code class="name flex">
<p>def <span class="ident">find_by_key</span>(</p><p>data, <br>target)</p>
</code></dt>
<dd>
<div class="desc"><p>Find a value by key in a dictionary.</p>
<pre><code class="language-python">&gt;&gt;&gt; dct = {
&gt;&gt;&gt;         &quot;A&quot;: &quot;T&quot;,
&gt;&gt;&gt;         &quot;R&quot;: 3,
&gt;&gt;&gt;         &quot;B&quot;: {
&gt;&gt;&gt;             &quot;C&quot;: {
&gt;&gt;&gt;                 &quot;D&quot;: &quot;value&quot;
&gt;&gt;&gt;                  }
&gt;&gt;&gt;              }
&gt;&gt;&gt;        }
&gt;&gt;&gt; find_by_key(dct, &quot;D&quot;)
&quot;value&quot;
</code></pre>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>data</code></strong> :&ensp;<code>dict</code></dt>
<dd>Dict to walk through</dd>
<dt><strong><code>target</code></strong> :&ensp;<code>str</code></dt>
<dd>target key</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Any</code></dt>
<dd>Value data[&hellip;][target]</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def find_by_key(data: dict, target: str) -&gt; Any:
    &#34;&#34;&#34;
    Find a value by key in a dictionary.

    ```python
    &gt;&gt;&gt; dct = {
    &gt;&gt;&gt;         &#34;A&#34;: &#34;T&#34;,
    &gt;&gt;&gt;         &#34;R&#34;: 3,
    &gt;&gt;&gt;         &#34;B&#34;: {
    &gt;&gt;&gt;             &#34;C&#34;: {
    &gt;&gt;&gt;                 &#34;D&#34;: &#34;value&#34;
    &gt;&gt;&gt;                  }
    &gt;&gt;&gt;              }
    &gt;&gt;&gt;        }
    &gt;&gt;&gt; find_by_key(dct, &#34;D&#34;)
    &#34;value&#34;
    ```

    Args:
        data (dict): Dict to walk through
        target (str): target key

    Returns:
        Any: Value data[...][target]

    &#34;&#34;&#34;
    val = None
    for key, value in data.items():
        if isinstance(value, dict):
            val = find_by_key(value, target)
            if val:
                break
        elif key == target:
            val = value
    return val</code></pre>
</details>
</dd>
<dt id="sertit.misc.run_cli"><code class="name flex">
<p>def <span class="ident">run_cli</span>(</p><p>cmd, <br>timeout=None, <br>check_return_value=True, <br>in_background=True, <br>cwd='/')</p>
</code></dt>
<dd>
<div class="desc"><p>Run a command line.</p>
<pre><code class="language-python">&gt;&gt;&gt; cmd_hillshade = [&quot;gdaldem&quot;, &quot;--config&quot;,
&gt;&gt;&gt;                  &quot;NUM_THREADS&quot;, &quot;1&quot;,
&gt;&gt;&gt;                  &quot;hillshade&quot;, strings.to_cmd_string(dem_path),
&gt;&gt;&gt;                  &quot;-compute_edges&quot;,
&gt;&gt;&gt;                  &quot;-z&quot;, self.nof_threads,
&gt;&gt;&gt;                  &quot;-az&quot;, azimuth,
&gt;&gt;&gt;                  &quot;-alt&quot;, zenith,
&gt;&gt;&gt;                  &quot;-of&quot;, &quot;GTiff&quot;,
&gt;&gt;&gt;                  strings.to_cmd_string(hillshade_dem)]
&gt;&gt;&gt; # Run command
&gt;&gt;&gt; run_cli(cmd_hillshade)
</code></pre>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>cmd</code></strong> :&ensp;<code>str</code> or <code>list[str]</code></dt>
<dd>Command as a list</dd>
<dt><strong><code>timeout</code></strong> :&ensp;<code>float</code></dt>
<dd>Timeout</dd>
<dt><strong><code>check_return_value</code></strong> :&ensp;<code>bool</code></dt>
<dd>Check output value of the exe</dd>
<dt><strong><code>in_background</code></strong> :&ensp;<code>bool</code></dt>
<dd>Run the subprocess in background</dd>
<dt><strong><code>cwd</code></strong> :&ensp;<code>str</code></dt>
<dd>Working directory</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>int, str</code></dt>
<dd>return value and output log</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def run_cli(
    cmd: Union[str, list],
    timeout: float = None,
    check_return_value: bool = True,
    in_background: bool = True,
    cwd=&#34;/&#34;,
) -&gt; (int, str):
    &#34;&#34;&#34;
    Run a command line.

    ```python
    &gt;&gt;&gt; cmd_hillshade = [&#34;gdaldem&#34;, &#34;--config&#34;,
    &gt;&gt;&gt;                  &#34;NUM_THREADS&#34;, &#34;1&#34;,
    &gt;&gt;&gt;                  &#34;hillshade&#34;, strings.to_cmd_string(dem_path),
    &gt;&gt;&gt;                  &#34;-compute_edges&#34;,
    &gt;&gt;&gt;                  &#34;-z&#34;, self.nof_threads,
    &gt;&gt;&gt;                  &#34;-az&#34;, azimuth,
    &gt;&gt;&gt;                  &#34;-alt&#34;, zenith,
    &gt;&gt;&gt;                  &#34;-of&#34;, &#34;GTiff&#34;,
    &gt;&gt;&gt;                  strings.to_cmd_string(hillshade_dem)]
    &gt;&gt;&gt; # Run command
    &gt;&gt;&gt; run_cli(cmd_hillshade)
    ```

    Args:
        cmd (str or list[str]): Command as a list
        timeout (float): Timeout
        check_return_value (bool): Check output value of the exe
        in_background (bool): Run the subprocess in background
        cwd (str): Working directory

    Returns:
        int, str: return value and output log
    &#34;&#34;&#34;
    if isinstance(cmd, list):
        cmd = [str(cmd_i) for cmd_i in cmd]
        cmd_line = &#34; &#34;.join(cmd)
    elif isinstance(cmd, str):
        cmd_line = cmd
    else:
        raise TypeError(&#34;The command line should be given as a str or a list&#34;)

    # Background
    LOGGER.debug(cmd_line)
    if in_background:
        stdout = None
        stderr = None
        close_fds = True
    else:
        stdout = subprocess.PIPE
        stderr = subprocess.STDOUT
        close_fds = False

    # The os.setsid() is passed in the argument preexec_fn so
    # it&#39;s run after the fork() and before  exec() to run the shell.
    with subprocess.Popen(
        cmd_line,
        shell=True,
        stdout=stdout,
        stderr=stderr,
        cwd=cwd,
        start_new_session=True,
        close_fds=close_fds,
    ) as process:
        output = &#34;&#34;
        if not in_background:
            for line in process.stdout:
                line = line.decode(
                    encoding=sys.stdout.encoding,
                    errors=&#34;replace&#34;
                    if sys.version_info &lt; (3, 5)
                    else &#34;backslashreplace&#34;,
                ).rstrip()
                LOGGER.info(line)
                output += line

        # Get return value
        retval = process.wait(timeout)

        # Kill process
        process.kill()

    # Check return value
    if check_return_value and retval != 0:
        raise RuntimeError(f&#34;Exe {cmd[0]} has failed.&#34;)

    return retval, output</code></pre>
</details>
</dd>
<dt id="sertit.misc.get_function_name"><code class="name flex">
<p>def <span class="ident">get_function_name</span>(</p><p>)</p>
</code></dt>
<dd>
<div class="desc"><p>Get the name of the function where this one is launched.</p>
<pre><code class="language-python">&gt;&gt;&gt; def huhuhu():
&gt;&gt;&gt;     return get_function_name()
&gt;&gt;&gt; huhuhu()
&quot;huhuhu&quot;
</code></pre>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>Function's name</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_function_name() -&gt; str:
    &#34;&#34;&#34;
    Get the name of the function where this one is launched.

    ```python
    &gt;&gt;&gt; def huhuhu():
    &gt;&gt;&gt;     return get_function_name()
    &gt;&gt;&gt; huhuhu()
    &#34;huhuhu&#34;
    ```

    Returns:
        str: Function&#39;s name
    &#34;&#34;&#34;
    # pylint: disable=W0212
    return sys._getframe(1).f_code.co_name</code></pre>
</details>
</dd>
<dt id="sertit.misc.in_docker"><code class="name flex">
<p>def <span class="ident">in_docker</span>(</p><p>)</p>
</code></dt>
<dd>
<div class="desc"><p>Check if the session is running inside a docker</p>
<pre><code class="language-python">if in_docker():
    print(&quot;OMG we are stock in a Docker ! Get me out of here !&quot;)
else:
    print(&quot;We are safe&quot;)
</code></pre>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>bool</code></dt>
<dd>True if inside a docker</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def in_docker() -&gt; bool:
    &#34;&#34;&#34;
    Check if the session is running inside a docker

    ```python
    if in_docker():
        print(&#34;OMG we are stock in a Docker ! Get me out of here !&#34;)
    else:
        print(&#34;We are safe&#34;)
    ```

    Returns:
        bool: True if inside a docker
    &#34;&#34;&#34;
    try:
        with open(&#34;/proc/1/cgroup&#34;, &#34;rt&#34;) as ifh:
            in_dck = &#34;docker&#34; in ifh.read()
    # pylint: disable=W0703
    except Exception:
        in_dck = False

    return in_dck</code></pre>
</details>
</dd>
<dt id="sertit.misc.chdir"><code class="name flex">
<p>def <span class="ident">chdir</span>(</p><p>newdir)</p>
</code></dt>
<dd>
<div class="desc"><p>Change current directory, used as a context manager, ie:</p>
<pre><code class="language-python">&gt;&gt;&gt; folder = r&quot;C:&quot;
&gt;&gt;&gt; with chdir(folder):
&gt;&gt;&gt;     print(os.getcwd())
'C:\'
</code></pre>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>newdir</code></strong> :&ensp;<code>str</code></dt>
<dd>New directory</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@contextmanager
def chdir(newdir: Union[str, CloudPath, Path]) -&gt; None:
    &#34;&#34;&#34;
    Change current directory, used as a context manager, ie:

    ```python
    &gt;&gt;&gt; folder = r&#34;C:\&#34;
    &gt;&gt;&gt; with chdir(folder):
    &gt;&gt;&gt;     print(os.getcwd())
    &#39;C:\\&#39;
    ```

    Args:
        newdir (str): New directory
    &#34;&#34;&#34;
    newdir = AnyPath(newdir)
    prevdir = os.getcwd()
    os.chdir(os.path.expanduser(newdir))
    try:
        yield
    finally:
        os.chdir(prevdir)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="sertit.misc.ListEnum"><code class="flex name class">
<span>class <span class="ident">ListEnum</span></span>
<span>(</span><span>value, names=None, *, module=None, qualname=None, type=None, start=1)</span>
</code></dt>
<dd>
<div class="desc"><p>List Enum (enum with function listing names and values)</p>
<pre><code class="language-python">&gt;&gt;&gt; @unique
&gt;&gt;&gt; class TsxPolarization(ListEnum):
&gt;&gt;&gt;     SINGLE = &quot;S&quot;  # Single
&gt;&gt;&gt;     DUAL = &quot;D&quot;  # Dual
&gt;&gt;&gt;     QUAD = &quot;Q&quot;  # Quad
&gt;&gt;&gt;     TWIN = &quot;T&quot;  # Twin
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ListEnum(Enum):
    &#34;&#34;&#34;
    List Enum (enum with function listing names and values)

    ```python
    &gt;&gt;&gt; @unique
    &gt;&gt;&gt; class TsxPolarization(ListEnum):
    &gt;&gt;&gt;     SINGLE = &#34;S&#34;  # Single
    &gt;&gt;&gt;     DUAL = &#34;D&#34;  # Dual
    &gt;&gt;&gt;     QUAD = &#34;Q&#34;  # Quad
    &gt;&gt;&gt;     TWIN = &#34;T&#34;  # Twin
    ```
    &#34;&#34;&#34;

    @classmethod
    def list_values(cls) -&gt; list:
        &#34;&#34;&#34;
        Get the value list of this enum

        ```python
        &gt;&gt;&gt; TsxPolarization.list_values()
        [&#34;S&#34;, &#34;D&#34;, &#34;Q&#34;, &#34;T&#34;]
        ```

        &#34;&#34;&#34;
        return list(map(lambda c: c.value, cls))

    @classmethod
    def list_names(cls) -&gt; list:
        &#34;&#34;&#34;
        Get the name list of this enum:

        ```python
        &gt;&gt;&gt; TsxPolarization.list_values()
        [&#34;SINGLE&#34;, &#34;DUAL&#34;, &#34;QUAD&#34;, &#34;TWIN&#34;]
        ```
        &#34;&#34;&#34;
        return list(map(lambda c: c.name, cls))

    @classmethod
    def from_value(cls, val: Any) -&gt; &#34;ListEnum&#34;:
        &#34;&#34;&#34;
        Get the enum class from its value:

        ```python
        &gt;&gt;&gt; TsxPolarization.from_value(&#34;Q&#34;)
        &lt;TsxPolarization.QUAD: &#39;Q&#39;&gt;
        ```

        Args:
            val (Any): Value of the Enum

        Returns:
            ListEnum: Enum with value
        &#34;&#34;&#34;
        if isinstance(val, cls):
            val = val.value
        try:
            return next(enum for enum in cls if enum.value == val)
        except StopIteration as ex:
            raise ValueError(f&#34;Non existing {val} in {cls.list_values()}&#34;) from ex

    @classmethod
    def convert_from(cls, to_convert: Union[list, str]) -&gt; list:
        &#34;&#34;&#34;
        Convert from a list or a string to an enum instance

        ```python
        &gt;&gt;&gt; TsxPolarization.convert_from([&#34;SINGLE&#34;, &#34;S&#34;, TsxPolarization.QUAD])
        [&lt;TsxPolarization.SINGLE: &#39;S&#39;&gt;, &lt;TsxPolarization.SINGLE: &#39;S&#39;&gt;, &lt;TsxPolarization.QUAD: &#39;Q&#39;&gt;]
        ```

        Args:
            to_convert (Union[list, str]): List or string to convert into an enum instance

        Returns:
            list: Converted list

        &#34;&#34;&#34;
        if not isinstance(to_convert, list):
            to_convert = [to_convert]

        enums = []

        for tc in to_convert:
            if tc in cls.list_values():
                enums.append(cls.from_value(tc))
            elif tc in cls.list_names():
                enums.append(getattr(cls, tc))
            elif isinstance(tc, cls):
                enums.append(tc)
            else:
                raise TypeError(
                    f&#34;Invalid name {tc}, &#34;
                    f&#34;should be chosen among {cls.list_values()} or {cls.list_names()}&#34;
                )

        return enums</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>enum.Enum</li>
</ul>
<h3>Static methods</h3>
<dl>
<dt id="sertit.misc.ListEnum.list_values"><code class="name flex">
<p>def <span class="ident">list_values</span>(</p><p>)</p>
</code></dt>
<dd>
<div class="desc"><p>Get the value list of this enum</p>
<pre><code class="language-python">&gt;&gt;&gt; TsxPolarization.list_values()
[&quot;S&quot;, &quot;D&quot;, &quot;Q&quot;, &quot;T&quot;]
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def list_values(cls) -&gt; list:
    &#34;&#34;&#34;
    Get the value list of this enum

    ```python
    &gt;&gt;&gt; TsxPolarization.list_values()
    [&#34;S&#34;, &#34;D&#34;, &#34;Q&#34;, &#34;T&#34;]
    ```

    &#34;&#34;&#34;
    return list(map(lambda c: c.value, cls))</code></pre>
</details>
</dd>
<dt id="sertit.misc.ListEnum.list_names"><code class="name flex">
<p>def <span class="ident">list_names</span>(</p><p>)</p>
</code></dt>
<dd>
<div class="desc"><p>Get the name list of this enum:</p>
<pre><code class="language-python">&gt;&gt;&gt; TsxPolarization.list_values()
[&quot;SINGLE&quot;, &quot;DUAL&quot;, &quot;QUAD&quot;, &quot;TWIN&quot;]
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def list_names(cls) -&gt; list:
    &#34;&#34;&#34;
    Get the name list of this enum:

    ```python
    &gt;&gt;&gt; TsxPolarization.list_values()
    [&#34;SINGLE&#34;, &#34;DUAL&#34;, &#34;QUAD&#34;, &#34;TWIN&#34;]
    ```
    &#34;&#34;&#34;
    return list(map(lambda c: c.name, cls))</code></pre>
</details>
</dd>
<dt id="sertit.misc.ListEnum.from_value"><code class="name flex">
<p>def <span class="ident">from_value</span>(</p><p>val)</p>
</code></dt>
<dd>
<div class="desc"><p>Get the enum class from its value:</p>
<pre><code class="language-python">&gt;&gt;&gt; TsxPolarization.from_value(&quot;Q&quot;)
&lt;TsxPolarization.QUAD: 'Q'&gt;
</code></pre>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>val</code></strong> :&ensp;<code>Any</code></dt>
<dd>Value of the Enum</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a title="sertit.misc.ListEnum" href="#sertit.misc.ListEnum">ListEnum</a></code></dt>
<dd>Enum with value</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def from_value(cls, val: Any) -&gt; &#34;ListEnum&#34;:
    &#34;&#34;&#34;
    Get the enum class from its value:

    ```python
    &gt;&gt;&gt; TsxPolarization.from_value(&#34;Q&#34;)
    &lt;TsxPolarization.QUAD: &#39;Q&#39;&gt;
    ```

    Args:
        val (Any): Value of the Enum

    Returns:
        ListEnum: Enum with value
    &#34;&#34;&#34;
    if isinstance(val, cls):
        val = val.value
    try:
        return next(enum for enum in cls if enum.value == val)
    except StopIteration as ex:
        raise ValueError(f&#34;Non existing {val} in {cls.list_values()}&#34;) from ex</code></pre>
</details>
</dd>
<dt id="sertit.misc.ListEnum.convert_from"><code class="name flex">
<p>def <span class="ident">convert_from</span>(</p><p>to_convert)</p>
</code></dt>
<dd>
<div class="desc"><p>Convert from a list or a string to an enum instance</p>
<pre><code class="language-python">&gt;&gt;&gt; TsxPolarization.convert_from([&quot;SINGLE&quot;, &quot;S&quot;, TsxPolarization.QUAD])
[&lt;TsxPolarization.SINGLE: 'S'&gt;, &lt;TsxPolarization.SINGLE: 'S'&gt;, &lt;TsxPolarization.QUAD: 'Q'&gt;]
</code></pre>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>to_convert</code></strong> :&ensp;<code>Union[list, str]</code></dt>
<dd>List or string to convert into an enum instance</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>list</code></dt>
<dd>Converted list</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def convert_from(cls, to_convert: Union[list, str]) -&gt; list:
    &#34;&#34;&#34;
    Convert from a list or a string to an enum instance

    ```python
    &gt;&gt;&gt; TsxPolarization.convert_from([&#34;SINGLE&#34;, &#34;S&#34;, TsxPolarization.QUAD])
    [&lt;TsxPolarization.SINGLE: &#39;S&#39;&gt;, &lt;TsxPolarization.SINGLE: &#39;S&#39;&gt;, &lt;TsxPolarization.QUAD: &#39;Q&#39;&gt;]
    ```

    Args:
        to_convert (Union[list, str]): List or string to convert into an enum instance

    Returns:
        list: Converted list

    &#34;&#34;&#34;
    if not isinstance(to_convert, list):
        to_convert = [to_convert]

    enums = []

    for tc in to_convert:
        if tc in cls.list_values():
            enums.append(cls.from_value(tc))
        elif tc in cls.list_names():
            enums.append(getattr(cls, tc))
        elif isinstance(tc, cls):
            enums.append(tc)
        else:
            raise TypeError(
                f&#34;Invalid name {tc}, &#34;
                f&#34;should be chosen among {cls.list_values()} or {cls.list_names()}&#34;
            )

    return enums</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<header>
<a class="homelink" rel="home" title="Home" href="/sertit-utils/">
<img src="https://sertit.pages.sertit.unistra.fr/sertit-utils/sertit_utils.png"
alt="logo"
style="width:40%;"/>
</a>
</header>
<form>
<input id="lunr-search" name="q" placeholder="ðŸ”Ž Search ..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.css" integrity="sha512-j1u8eUJ4f23xPPxwOrLUPQaCD2dwzNqqmDDcWS4deWsMv2ohLqmXXuP3hU7g8TyzbMSakP/mMqoNBYWj8AEIFg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.js" integrity="sha512-plGUER9JkeEWPPqQBE4sdLqBoQug5Ap+BCGMc7bJ8BXkm+VVj6QzkpBz5Yv2yPkkq+cqg9IpkBaGCas6uDbW8g==" crossorigin></script>
<style>
.modal-dialog iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-dialog iframe {
width: 70vw;
height: 80vh;
}
}
.modal-dialog .tingle-modal-box {width: auto;}
.modal-dialog .tingle-modal-box__content {padding: 0;}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = '../doc-search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-dialog'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<iframe src="' + url + '"></iframe>').open();
}
</script>
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="sertit" href="index.html">sertit</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="sertit.misc.remove_empty_values" href="#sertit.misc.remove_empty_values">remove_empty_values</a></code></li>
<li><code><a title="sertit.misc.list_to_dict" href="#sertit.misc.list_to_dict">list_to_dict</a></code></li>
<li><code><a title="sertit.misc.nested_set" href="#sertit.misc.nested_set">nested_set</a></code></li>
<li><code><a title="sertit.misc.check_mandatory_keys" href="#sertit.misc.check_mandatory_keys">check_mandatory_keys</a></code></li>
<li><code><a title="sertit.misc.find_by_key" href="#sertit.misc.find_by_key">find_by_key</a></code></li>
<li><code><a title="sertit.misc.run_cli" href="#sertit.misc.run_cli">run_cli</a></code></li>
<li><code><a title="sertit.misc.get_function_name" href="#sertit.misc.get_function_name">get_function_name</a></code></li>
<li><code><a title="sertit.misc.in_docker" href="#sertit.misc.in_docker">in_docker</a></code></li>
<li><code><a title="sertit.misc.chdir" href="#sertit.misc.chdir">chdir</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="sertit.misc.ListEnum" href="#sertit.misc.ListEnum">ListEnum</a></code></h4>
<ul>
<li>
</li>
<li>
<ul class="">
<li><code><a title="sertit.misc.ListEnum.list_values" href="#sertit.misc.ListEnum.list_values">list_values</a></code></li>
<li><code><a title="sertit.misc.ListEnum.list_names" href="#sertit.misc.ListEnum.list_names">list_names</a></code></li>
<li><code><a title="sertit.misc.ListEnum.from_value" href="#sertit.misc.ListEnum.from_value">from_value</a></code></li>
<li><code><a title="sertit.misc.ListEnum.convert_from" href="#sertit.misc.ListEnum.convert_from">convert_from</a></code></li>
</ul>
</li>
<li>
</li>
<li>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>